<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Update Network Flow - FrostClient</title>
  <style>
    /* Reset básico */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #0a1524;
      color: #a0dfff;
      display: flex;
      justify-content: center;
      padding: 30px;
    }

    #update-network-flow {
      width: 100%;
      max-width: 960px;
      background: #0f1a2b;
      padding: 25px 20px;
      border-radius: 15px;
      box-shadow: 0 0 25px #00ffff66;
    }
    #update-network-flow h2 {
      color: #00ffff;
      text-align: center;
      margin-bottom: 15px;
    }
    #update-network-flow p {
      text-align: center;
      font-size: 1rem;
      color: #a0dfff;
      margin-bottom: 30px;
    }
    .network-graph {
      display: flex;
      flex-wrap: nowrap;
      justify-content: space-between;
      gap: 10px;
      overflow-x: auto;
      padding-bottom: 15px;
    }
    .node {
      flex: 1 0 120px;
      background: #152538;
      border-radius: 12px;
      padding: 15px 10px;
      box-shadow: 0 0 12px #00ffff66;
      text-align: center;
      color: #a0dfff;
      position: relative;
      min-width: 120px;
    }
    .node h3 {
      margin-bottom: 8px;
      font-size: 1.1rem;
      color: #00ffff;
    }
    .node p {
      font-size: 0.85rem;
      margin-bottom: 12px;
      min-height: 36px;
    }
    .ping-bar {
      height: 10px;
      background: linear-gradient(90deg, #00ffff, #0066cc);
      border-radius: 10px;
      width: 0;
      margin: 0 auto 8px auto;
      box-shadow: 0 0 10px #00ffffaa;
      transition: width 2s ease-in-out;
    }
    .status {
      font-size: 0.8rem;
      font-style: italic;
      color: #66ccff;
      min-height: 20px;
    }
  </style>
</head>
<body>

  <div id="update-network-flow" class="section">
    <h2 data-text-en="Update Network Flow" data-text-pt="Fluxo de Atualização" data-text-es="Flujo de Actualización">Update Network Flow</h2>
    <p data-text-en="Visualizing the process of skin updates across servers with ping and status."
       data-text-pt="Visualizando o processo de atualização de skins pelos servidores com ping e status."
       data-text-es="Visualizando el proceso de actualización de skins a través de servidores con ping y estado.">
      Visualizing the process of skin updates across servers with ping and status.
    </p>

    <div class="network-graph">

      <div class="node" id="node-github" data-text-en="GitHub API" data-text-pt="API do GitHub" data-text-es="API de GitHub">
        <h3>GitHub API</h3>
        <p data-text-en="Source of skin data" data-text-pt="Fonte dos dados das skins" data-text-es="Fuente de datos de skins">Source of skin data</p>
        <div class="ping-bar" id="ping-github"></div>
        <div class="status" id="status-github"></div>
      </div>

      <div class="node" id="node-vercel" data-text-en="Vercel Servers" data-text-pt="Servidores Vercel" data-text-es="Servidores Vercel">
        <h3>Vercel Servers</h3>
        <p data-text-en="Processing & caching" data-text-pt="Processamento e cache" data-text-es="Procesamiento y caché">Processing & caching</p>
        <div class="ping-bar" id="ping-vercel"></div>
        <div class="status" id="status-vercel"></div>
      </div>

      <div class="node" id="node-frost" data-text-en="FrostClient Servers" data-text-pt="Servidores FrostClient" data-text-es="Servidores FrostClient">
        <h3>FrostClient Servers</h3>
        <p data-text-en="Downloading skins & DB" data-text-pt="Download das skins e banco de dados" data-text-es="Descarga de skins y base de datos">Downloading skins & DB</p>
        <div class="ping-bar" id="ping-frost"></div>
        <div class="status" id="status-frost"></div>
      </div>

      <div class="node" id="node-verification" data-text-en="Verification & Staff" data-text-pt="Verificação e equipe" data-text-es="Verificación y equipo">
        <h3>Verification & Staff</h3>
        <p data-text-en="Multi-step checks" data-text-pt="Checagens em múltiplas etapas" data-text-es="Chequeos multi-etapa">Multi-step checks</p>
        <div class="ping-bar" id="ping-verification"></div>
        <div class="status" id="status-verification"></div>
      </div>

      <div class="node" id="node-site" data-text-en="FrostClient Website" data-text-pt="Site FrostClient" data-text-es="Sitio FrostClient">
        <h3>FrostClient Website</h3>
        <p data-text-en="Skins published online" data-text-pt="Skins publicadas online" data-text-es="Skins publicadas en línea">Skins published online</p>
        <div class="ping-bar" id="ping-site"></div>
        <div class="status" id="status-site"></div>
      </div>

      <div class="node" id="node-app" data-text-en="Minecraft App" data-text-pt="App Minecraft" data-text-es="App Minecraft">
        <h3>Minecraft App</h3>
        <p data-text-en="Direct API fetch" data-text-pt="Busca direta da API" data-text-es="Búsqueda directa de la API">Direct API fetch</p>
        <div class="ping-bar" id="ping-app"></div>
        <div class="status" id="status-app"></div>
      </div>

    </div>

  </div>

  <script>
    // Function para trocar idioma dos textos data-text-xx
    function setLanguage(lang = 'en') {
      const container = document.getElementById('update-network-flow');
      container.querySelectorAll('[data-text-en]').forEach(el => {
        if(lang === 'en') el.textContent = el.getAttribute('data-text-en');
        else if(lang === 'pt') el.textContent = el.getAttribute('data-text-pt');
        else if(lang === 'es') el.textContent = el.getAttribute('data-text-es');
      });
    }

    // Exemplo ping/status simulados (você pode adaptar para dados reais)
    const pingTimes = {
      github: 120,
      vercel: 80,
      frost: 90,
      verification: 70,
      site: 60,
      app: 50
    };
    const statusMsgs = {
      en: {
        github: "API responding",
        vercel: "Cache updated",
        frost: "Skins downloading",
        verification: "Verification in progress",
        site: "Site updated",
        app: "App syncing"
      },
      pt: {
        github: "API respondendo",
        vercel: "Cache atualizado",
        frost: "Skins baixando",
        verification: "Verificação em andamento",
        site: "Site atualizado",
        app: "App sincronizando"
      },
      es: {
        github: "API respondiendo",
        vercel: "Caché actualizado",
        frost: "Descargando skins",
        verification: "Verificación en progreso",
        site: "Sitio actualizado",
        app: "App sincronizando"
      }
    };

    function animatePingBars() {
      Object.entries(pingTimes).forEach(([key, time]) => {
        const bar = document.getElementById(`ping-${key}`);
        if(bar){
          // Convert ping 0-150ms to bar width 0-100%
          let widthPercent = Math.min(100, (150 - time) * 100 / 150);
          if(widthPercent < 20) widthPercent = 20; // mínimo visual
          bar.style.width = widthPercent + '%';
        }
      });
    }

    function updateStatusTexts(lang='en') {
      Object.keys(pingTimes).forEach(key => {
        const statusEl = document.getElementById(`status-${key}`);
        if(statusEl) statusEl.textContent = statusMsgs[lang][key];
      });
    }

    // Inicializar com inglês
    setLanguage('en');
    updateStatusTexts('en');

    // Animar barras ping (loop infinito)
    function pingLoop() {
      animatePingBars();
      setTimeout(pingLoop, 4000);
    }
    pingLoop();

    // Para teste: trocar idioma a cada 8s (English → Portuguese → Spanish)
    let langs = ['en', 'pt', 'es'];
    let currentLangIndex = 0;
    setInterval(() => {
      currentLangIndex = (currentLangIndex + 1) % langs.length;
      const lang = langs[currentLangIndex];
      setLanguage(lang);
      updateStatusTexts(lang);
    }, 8000);
  </script>

</body>
</html>
